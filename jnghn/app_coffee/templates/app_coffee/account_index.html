{% extends 'layout.html' %}

{% block title %}<title>Coffee beans</title>{% endblock %}

{% block content %}
<div class="d-flex large-view border-bottom my-1">
    <span class="h2">Account Book List</span>
    {% if user.is_authenticated %}
    <a href="{% url 'app_coffee:account_new' %}" class="btn border ml-auto my-auto"><i class="fa fa-pen text-dark"></i></a>
    {% endif %}
</div>
<div class="">
    {% if not account_list %}
    <p class="text-center">등록된 게시물이 없습니다.</p>
    {% else %}
    <table class="table table-striped table-bordered table-responsive-lg table-sm">
        <tr class="text-center">
            <th style="width: 40%">원두</th>
            <th>시작 & 끝</th>
            <th>기간</th>
            <th>구매처</th>
            <th>양</th>
            <th>가격</th>
            <th></th>
        </tr>
        {% for account in account_list %}
        <tr class="text-center">
            <td>{{ account.name }}</td>
            <td><p class="m-0">{{ account.begin_date | date:"Y. m. d." }}</p>
                {% if account.end_date != None %}{{ account.end_date | date:"Y. m. d." }}{% else %} - {% endif %}
            </td>
            <td>{% if account.period != None %} {{ account.period }}일{% else %} - {% endif %}</td>
            <td>{{ account.purchase_site }}</td>
            {% load humanize %}
            <td>{{ account.amount | intcomma }}g</td>
            <td>{{ account.price | intcomma }}원</td>
            <td>
                {% if not account.end_date %}
                <a href="{% url 'app_coffee:account_renew' account.id %}" class="btn btn-sm border bg-save">
                    <i class="fa fa-check text-dark"></i>
                </a>
                {% else %}
                <span><i class="fa fa-check"></i></span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
</div>
{% endblock %}